<html>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="https://cdn.rawgit.com/jsoma/tabletop/master/src/tabletop.js"></script>
<!-- load the d3.js library -->    
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.8/d3.min.js"></script>

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>



<!-- CSS -->
<style>
  #canvas {
  }

  #canvas-svg {
  }

  .line {
    fill: none;
  }

  /* Para tabla de imp exp */
  table {
      border-collapse: collapse;
      border: 2px black solid;
      font: 12px sans-serif;
  }

  td {
      border: 1px black solid;
      padding: 5px;
  }
</style>


<div id="tabla"></div>

<script>
	

  function tabulate(data, columns) {
      var table = d3.select('body').append('table')
      var thead = table.append('thead')
      var tbody = table.append('tbody');

      // append the header row
      thead.append('tr')
        .selectAll('th')
        .data(columns).enter()
        .append('th')
          .text(function (column) { return column; });

      // create a row for each object in the data
      var rows = tbody.selectAll('tr')
        .data(data)
        .enter()
        .append('tr');

      // create a cell in each row for each column
      var cells = rows.selectAll('td')
        .data(function (row) {
          return columns.map(function (column) {
            return {column: column, value: row[column]};
          });
        })
        .enter()
        .append('td')
          .text(function (d) { return d.value; })
          .attr("style", function (d) {
            if(d.value === "Exportaciones"){
              return "color:red";
            }
          });

      return table;
  }

  //var public_spreadsheet_url = '1YaFYOD79oEKs12JfzqO3-mww2o5_Cr4eiZIWxWDynaw'; //Funciona
  var public_spreadsheet_url = '1RTG-gAu6Yj9qje0c1IoXLSOfCaerx29CZUeLsdWSaOo'; //Funciona

  function renderSpreadsheetData() {
    Tabletop.init( { key: public_spreadsheet_url,
                    debug:true,
                     callback: draw,
                     simpleSheet: true } )
  }

  function draw(data, tabletop) {
    // draw chart
    console.log("Funciono");
    console.log(data);
    // render the table(s)
    tabulate(data, ['Indicador', 'Unidad','Periodo','Valor','Variacion i.a.','Variacion2','Periodo2','2016','Var. 16/15']); // 2 column table
    tabulate(data, ['Indicador', 'Unidad','Periodo','Valor','Variacion i.a.','Variacion2','Periodo2']); // 2 column table
  }

  renderSpreadsheetData();
</script>

<!-- TOGGLER -->
<div class="row" style="text-align:center;margin-top:50px;margin-bottom:50px">
  <div class="col-xs-12">
    <span>Tablero de Variables</span>
    <span><input id="toggle-one" checked type="checkbox" data-width="100" data-height="35"></span>
    <span>Datos Hist√≥ricos</span>
  </div>
</div>


<!-- pestania 2: TABLERO -->
<div id="tablero" style="margin: 0 auto;margin-left:50px;">
  <iframe style="width:1090px;height:1200px" src="https://docs.google.com/spreadsheets/d/1M0PxJ6WaXHCf8gQ6aCj12pwc9XTk9ulBP8W4Jxwlhl8/pubhtml?widget=true&amp;headers=false&amp;chrome=false"></iframe>
</div>



<!-- pestania 2: DATOS HISTORICOS -->
<div class="row" id="graficos" style="display:none;">
  <div class="col-xs-12 col-md-8" id="container" style="margin: 0 auto;"></div>
  <div class="col-xs-12 col-md-4" id="datos-impexp" style="margin: 0 auto;"></div>
</div>




<!-- /* Para Switcher - Toggler */ -->
<script>
  $(function() {
    $('#toggle-one').bootstrapToggle({
      on: '',
      off: ''
    });
  })

  $(function() {
    $('#toggle-one').change(function() {
      $('#tablero').toggle();
      $('#graficos').toggle();

    })
  })
</script>

<!-- /* Para grafico highcharts de imp exp */ -->
<script>
    
  $(function () {
    // Create the chart
    $('#container').highcharts({

        title: {
            text: 'Importaciones/Exportaciones'
        },

        data: {
            googleSpreadsheetKey: '1YaFYOD79oEKs12JfzqO3-mww2o5_Cr4eiZIWxWDynaw'
        },
        yAxis: {
            title: {
                text: 'Millones de $'
            }
        }

    });
  });
</script>
<!-- /* Para tabla de imp exp */ -->
<script>
  
  d3.text("https://dl.dropboxusercontent.com/u/10725207/impexp.csv", function(data) {
    var parsedCSV = d3.csvParseRows(data);

    var container = d3.select("#datos-impexp")
        .append("table")

        .selectAll("tr")
            .data(parsedCSV).enter()
            .append("tr")

        .selectAll("td")
            .data(function(d) { return d; }).enter()
            .append("td")
            .text(function(d) { return d; });
  });
</script>

</html>